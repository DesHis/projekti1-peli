[gd_scene load_steps=14 format=3 uid="uid://dxevy65lkhibv"]

[ext_resource type="PackedScene" uid="uid://dxta58xb1b3wk" path="res://player.tscn" id="1_66f0x"]
[ext_resource type="PackedScene" uid="uid://cbp1aedhpdugo" path="res://enemy_projectile.tscn" id="2_heipv"]
[ext_resource type="Texture2D" uid="uid://d1c5t3ww2nv74" path="res://sprites/crosshair.png" id="2_ysv7l"]
[ext_resource type="PackedScene" uid="uid://kwnhyg72qcxf" path="res://hud.tscn" id="3_chuea"]
[ext_resource type="Script" path="res://PlayerProjectileSpawner.gd" id="4_nfyyp"]
[ext_resource type="Script" path="res://TimerBar.gd" id="6_07ov0"]
[ext_resource type="Script" path="res://HealthBar.gd" id="7_tkodr"]

[sub_resource type="GDScript" id="GDScript_h37l6"]
script/source = "extends Timer


# Called when the node enters the scene tree for the first time.
func _ready():
	pass # Replace with function body.


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(_delta):
	pass
"

[sub_resource type="SpriteFrames" id="SpriteFrames_t3eif"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("2_ysv7l")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_gb0wd"]
bg_color = Color(0.188235, 0.184314, 0.176471, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_kcowk"]
bg_color = Color(0, 0.729412, 0.27451, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_c2uvn"]
bg_color = Color(0.462745, 0, 0.0941176, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_nasut"]
bg_color = Color(1, 0, 0, 1)

[node name="Main" type="Node"]

[node name="SwitchTimer" type="Timer" parent="."]
wait_time = 5.0
autostart = true
script = SubResource("GDScript_h37l6")

[node name="Player" parent="." instance=ExtResource("1_66f0x")]
collision_mask = 2

[node name="PlayerProjectileSpawner" type="Node2D" parent="Player"]
show_behind_parent = true
script = ExtResource("4_nfyyp")

[node name="Crosshair" type="AnimatedSprite2D" parent="Player/PlayerProjectileSpawner"]
show_behind_parent = true
sprite_frames = SubResource("SpriteFrames_t3eif")

[node name="ShootTimer" type="Timer" parent="Player/PlayerProjectileSpawner"]

[node name="Camera2D" type="Camera2D" parent="Player"]
position_smoothing_enabled = true
position_smoothing_speed = 10.0

[node name="EnemyProjectile" parent="." instance=ExtResource("2_heipv")]
position = Vector2(771, 281)
collision_layer = 2

[node name="EnemyProjectile2" parent="." instance=ExtResource("2_heipv")]
position = Vector2(442, 278)
collision_layer = 2

[node name="EnemyProjectile3" parent="." instance=ExtResource("2_heipv")]
position = Vector2(663, 417)
collision_layer = 2

[node name="HUD" parent="." instance=ExtResource("3_chuea")]
script = null

[node name="TimerBar" type="ProgressBar" parent="HUD"]
modulate = Color(0, 0.862745, 0.372549, 1)
custom_minimum_size = Vector2(300, 25)
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_top = -27.0
offset_right = 100.0
grow_vertical = 0
theme_override_styles/background = SubResource("StyleBoxFlat_gb0wd")
theme_override_styles/fill = SubResource("StyleBoxFlat_kcowk")
show_percentage = false
script = ExtResource("6_07ov0")

[node name="HealthBar" type="ProgressBar" parent="HUD"]
custom_minimum_size = Vector2(500, 35)
offset_right = 4.0
offset_bottom = 27.0
theme_override_styles/background = SubResource("StyleBoxFlat_c2uvn")
theme_override_styles/fill = SubResource("StyleBoxFlat_nasut")
show_percentage = false
script = ExtResource("7_tkodr")

[connection signal="timeout" from="SwitchTimer" to="Player/PlayerProjectileSpawner" method="_on_switch_timer_timeout"]
[connection signal="body_entered" from="Player" to="Player" method="_on_body_entered"]
[connection signal="timeout" from="Player/PlayerProjectileSpawner/ShootTimer" to="Player/PlayerProjectileSpawner" method="_on_shoot_timer_timeout"]
