[gd_scene load_steps=21 format=3 uid="uid://dxevy65lkhibv"]

[ext_resource type="PackedScene" uid="uid://dxta58xb1b3wk" path="res://player.tscn" id="1_66f0x"]
[ext_resource type="PackedScene" uid="uid://cm4ypsw2vjmqy" path="res://loadingUI.tscn" id="1_cnnkx"]
[ext_resource type="Script" path="res://WorldMap.gd" id="2_i6627"]
[ext_resource type="PackedScene" uid="uid://kwnhyg72qcxf" path="res://hud.tscn" id="3_chuea"]
[ext_resource type="Script" path="res://FiringQueueContainer.gd" id="6_7n4u1"]
[ext_resource type="Script" path="res://TimerBar.gd" id="6_07ov0"]
[ext_resource type="Texture2D" uid="uid://ujaui61aj1lg" path="res://sprites/single.png" id="6_r3hev"]
[ext_resource type="Script" path="res://HealthBar.gd" id="7_tkodr"]
[ext_resource type="Script" path="res://ModeGenerator.gd" id="8_lgtmv"]
[ext_resource type="Script" path="res://GameTimer.gd" id="11_abxn5"]
[ext_resource type="Script" path="res://GameDirector.gd" id="16_c003v"]
[ext_resource type="Texture2D" uid="uid://dvy0m3nixef4" path="res://sprites/tiletest.png" id="17_wpvxt"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_gi75e"]
vertices = PackedVector2Array(8, -7, 8, 7, 7, 8, -7, 8, -8, 7, -8, -7, -7, -8, 7, -8)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3, 4, 5, 6, 7)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-6.8125, -8, -8, -6.875, -8, 6.75, -6.9375, 8, 6.8125, 8, 8, 7, 8, -6.625, 6.9375, -8)])
source_geometry_group_name = &"navigation_polygon_source_group"
agent_radius = 0.0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_41eft"]
texture = ExtResource("17_wpvxt")
0:0/0 = 0
0:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:0/0/physics_layer_0/angular_velocity = 0.0
0:0/0/navigation_layer_0/polygon = SubResource("NavigationPolygon_gi75e")
1:0/0 = 0
1:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:0/0/physics_layer_0/angular_velocity = 0.0
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, -8, 8, 8, 8, 8, -8)

[sub_resource type="TileSet" id="TileSet_q0wc0"]
physics_layer_0/collision_layer = 16
physics_layer_0/collision_mask = 0
navigation_layer_0/layers = 1
sources/1 = SubResource("TileSetAtlasSource_41eft")

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_gb0wd"]
bg_color = Color(0.188235, 0.184314, 0.176471, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_kcowk"]
bg_color = Color(0, 0.729412, 0.27451, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_c2uvn"]
bg_color = Color(0.462745, 0, 0.0941176, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_nasut"]
bg_color = Color(1, 0, 0, 1)

[sub_resource type="GDScript" id="GDScript_h37l6"]
script/source = "extends Timer


# Called when the node enters the scene tree for the first time.
func _ready():
	pass # Replace with function body.


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(_delta):
	pass
"

[node name="Main" type="Node"]

[node name="LoadingUi" parent="." instance=ExtResource("1_cnnkx")]
visible = false

[node name="TileMap" type="TileMap" parent="."]
process_mode = 3
z_index = -10
tile_set = SubResource("TileSet_q0wc0")
format = 2
script = ExtResource("2_i6627")

[node name="Player" parent="." instance=ExtResource("1_66f0x")]
scale = Vector2(0.3, 0.3)
moveSpeed = 150
sprintSpeed = 200
currentHealth = 100

[node name="GameDirector" type="Node2D" parent="Player"]
script = ExtResource("16_c003v")

[node name="MoneyTimer" type="Timer" parent="Player/GameDirector"]
autostart = true

[node name="SpawnTimer" type="Timer" parent="Player/GameDirector"]

[node name="DifficultyTimer" type="Timer" parent="Player/GameDirector"]
wait_time = 60.0
autostart = true

[node name="HUD" parent="." instance=ExtResource("3_chuea")]
process_mode = 3

[node name="TimerBarMargin" type="MarginContainer" parent="HUD"]
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_top = -40.0
offset_right = 519.0
grow_vertical = 0
theme_override_constants/margin_left = 20
theme_override_constants/margin_bottom = 20

[node name="TimerBar" type="ProgressBar" parent="HUD/TimerBarMargin"]
modulate = Color(0, 0.862745, 0.372549, 1)
custom_minimum_size = Vector2(300, 25)
layout_mode = 2
theme_override_styles/background = SubResource("StyleBoxFlat_gb0wd")
theme_override_styles/fill = SubResource("StyleBoxFlat_kcowk")
show_percentage = false
script = ExtResource("6_07ov0")

[node name="HealthBarMargin" type="MarginContainer" parent="HUD"]
offset_left = 25.0
offset_right = 550.0
offset_bottom = 60.0
theme_override_constants/margin_left = 25
theme_override_constants/margin_top = 25

[node name="HealthBar" type="ProgressBar" parent="HUD/HealthBarMargin"]
custom_minimum_size = Vector2(500, 35)
layout_mode = 2
theme_override_styles/background = SubResource("StyleBoxFlat_c2uvn")
theme_override_styles/fill = SubResource("StyleBoxFlat_nasut")
show_percentage = false
script = ExtResource("7_tkodr")

[node name="FiringQueueMargin" type="MarginContainer" parent="HUD"]
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_top = -128.0
offset_right = 504.0
grow_vertical = 0
theme_override_constants/margin_left = 15
theme_override_constants/margin_bottom = 60

[node name="FiringQueueContainer" type="HBoxContainer" parent="HUD/FiringQueueMargin"]
layout_mode = 2
script = ExtResource("6_7n4u1")

[node name="FiringModeContainer" type="MarginContainer" parent="HUD/FiringQueueMargin/FiringQueueContainer"]
custom_minimum_size = Vector2(128, 128)
layout_mode = 2
theme_override_constants/margin_left = 15
theme_override_constants/margin_top = 15
theme_override_constants/margin_bottom = 5

[node name="FiringMode" type="TextureRect" parent="HUD/FiringQueueMargin/FiringQueueContainer/FiringModeContainer"]
layout_mode = 2
texture = ExtResource("6_r3hev")

[node name="FiringModeContainer2" type="MarginContainer" parent="HUD/FiringQueueMargin/FiringQueueContainer"]
custom_minimum_size = Vector2(90, 90)
layout_mode = 2
theme_override_constants/margin_left = 5
theme_override_constants/margin_top = 38
theme_override_constants/margin_bottom = 5

[node name="FiringMode" type="TextureRect" parent="HUD/FiringQueueMargin/FiringQueueContainer/FiringModeContainer2"]
layout_mode = 2
texture = ExtResource("6_r3hev")

[node name="FiringModeContainer3" type="MarginContainer" parent="HUD/FiringQueueMargin/FiringQueueContainer"]
custom_minimum_size = Vector2(90, 90)
layout_mode = 2
theme_override_constants/margin_left = 5
theme_override_constants/margin_top = 38
theme_override_constants/margin_bottom = 5

[node name="FiringMode" type="TextureRect" parent="HUD/FiringQueueMargin/FiringQueueContainer/FiringModeContainer3"]
layout_mode = 2
texture = ExtResource("6_r3hev")

[node name="FiringModeContainer4" type="MarginContainer" parent="HUD/FiringQueueMargin/FiringQueueContainer"]
custom_minimum_size = Vector2(90, 90)
layout_mode = 2
theme_override_constants/margin_left = 5
theme_override_constants/margin_top = 38
theme_override_constants/margin_bottom = 5

[node name="FiringMode" type="TextureRect" parent="HUD/FiringQueueMargin/FiringQueueContainer/FiringModeContainer4"]
layout_mode = 2
texture = ExtResource("6_r3hev")

[node name="FiringModeContainer5" type="MarginContainer" parent="HUD/FiringQueueMargin/FiringQueueContainer"]
custom_minimum_size = Vector2(90, 90)
layout_mode = 2
theme_override_constants/margin_left = 5
theme_override_constants/margin_top = 38
theme_override_constants/margin_bottom = 5

[node name="FiringMode" type="TextureRect" parent="HUD/FiringQueueMargin/FiringQueueContainer/FiringModeContainer5"]
layout_mode = 2
texture = ExtResource("6_r3hev")

[node name="GameTimerMargin" type="MarginContainer" parent="HUD"]
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -79.0
offset_right = 79.0
offset_bottom = 45.0
grow_horizontal = 2
theme_override_constants/margin_top = 20

[node name="GameTimer" type="RichTextLabel" parent="HUD/GameTimerMargin"]
layout_mode = 2
theme_override_font_sizes/normal_font_size = 32
bbcode_enabled = true
text = "[center]00:00"
fit_content = true
script = ExtResource("11_abxn5")

[node name="Timer" type="Timer" parent="HUD/GameTimerMargin/GameTimer"]
autostart = true

[node name="SwitchTimer" type="Timer" parent="."]
wait_time = 5.0
autostart = true
script = SubResource("GDScript_h37l6")

[node name="ModeGenerator" type="Node" parent="."]
script = ExtResource("8_lgtmv")
singleSpeed = 300
tripleSpeed = 300
tripleSize = 0.25
blastSpeed = 300
blastSize = 0.3
circleSpeed = 300
burstSpeed = 300
spraySpeed = 300

[connection signal="timeout" from="Player/GameDirector/MoneyTimer" to="Player/GameDirector" method="_on_money_timer_timeout"]
[connection signal="timeout" from="Player/GameDirector/SpawnTimer" to="Player/GameDirector" method="_on_spawn_timer_timeout"]
[connection signal="timeout" from="Player/GameDirector/DifficultyTimer" to="Player/GameDirector" method="_on_difficulty_timer_timeout"]
[connection signal="timeout" from="HUD/GameTimerMargin/GameTimer/Timer" to="HUD/GameTimerMargin/GameTimer" method="_on_timer_timeout"]
